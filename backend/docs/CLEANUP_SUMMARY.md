# ã‚³ãƒ¼ãƒ‰ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚µãƒãƒªãƒ¼

## ğŸ“‹ **å®Ÿæ–½å†…å®¹**

### **1. æ¥½å¤©ãƒ–ãƒƒã‚¯ã‚¹é–¢é€£ã‚³ãƒ¼ãƒ‰ã®å‰Šé™¤**

#### **å‰Šé™¤ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«:**
- `backend/app/services/rakuten_books_service.py` - å®Œå…¨ã«å‰Šé™¤

#### **å‰Šé™¤ã—ãŸè¨­å®š:**
- `backend/app/config/settings.py`:
  - `RAKUTEN_APPLICATION_ID` - å‰Šé™¤
  - `RAKUTEN_AFFILIATE_ID` - å‰Šé™¤

#### **æ›´æ–°ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«:**
- `backend/app/services/ranking_service.py`:
  - `get_rakuten_books_service()` â†’ `get_openbd_service()` ã«å¤‰æ›´
  - `self.rakuten_service` â†’ `self.openbd_service` ã«å¤‰æ›´
  - æ¥½å¤©é–¢é€£ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ (`rakuten_url`, `rakuten_affiliate_url`, `rakuten_data`) ã‚’ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‹ã‚‰å‰Šé™¤

- `backend/app/services/qiita_service.py`:
  - æ¥½å¤©ãƒ–ãƒƒã‚¯ã‚¹URLæŠ½å‡ºå‡¦ç†ã‚’å‰Šé™¤

- `backend/scripts/collect_books_from_qiita.py`:
  - `rakuten_` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã®ãƒã‚§ãƒƒã‚¯ã‚’å‰Šé™¤

- `frontend/lib/api.ts`:
  - `rakuten_url`, `rakuten_affiliate_url`, `rakuten_data` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å‰Šé™¤

- `backend/app/schemas/book.py`:
  - `rakuten_url`, `rakuten_affiliate_url` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å‰Šé™¤
  - `rakuten_data` ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ï¼ˆãƒ¬ã‚¬ã‚·ãƒ¼åã ãŒopenBDãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ï¼‰

---

### **2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¢ãƒ‡ãƒ«ã®æ•´ç†**

`backend/app/models/book.py`:
- `rakuten_data` â†’ å®Ÿéš›ã¯openBDãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¦ã„ã‚‹ã“ã¨ã‚’æ˜è¨˜
- `rakuten_url`, `rakuten_affiliate_url` â†’ ãƒ¬ã‚¬ã‚·ãƒ¼ãƒ»æœªä½¿ç”¨ãƒ»å°†æ¥å‰Šé™¤äºˆå®šã¨ãƒãƒ¼ã‚¯

**æ³¨æ„:** ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚«ãƒ©ãƒ è‡ªä½“ã¯äº’æ›æ€§ã®ãŸã‚æ®‹ã—ã¦ã„ã¾ã™ã€‚ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãªã—ã§å‰Šé™¤ã™ã‚‹ã¨æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã«å½±éŸ¿ãŒã‚ã‚‹ãŸã‚ã€å°†æ¥çš„ãªãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§å‰Šé™¤äºˆå®šã§ã™ã€‚

---

### **3. ç¾åœ¨ã®æ§‹æˆ**

#### **æ›¸ç±æƒ…å ±API:**
- âœ… **openBD API** - å®Œå…¨ç„¡æ–™ãƒ»ç„¡åˆ¶é™
  - æ›¸ç±æƒ…å ±ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ã€è‘—è€…ã€å‡ºç‰ˆç¤¾ã€ç™ºå£²æ—¥ã€èª¬æ˜æ–‡ã€æ›¸å½±ï¼‰ã‚’å–å¾—

#### **ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆãƒªãƒ³ã‚¯:**
- âœ… **Amazon** - ISBN-10/ISBN-13ã‹ã‚‰è‡ªå‹•ç”Ÿæˆ
  - `AMAZON_ASSOCIATE_TAG` ã‚’ä½¿ç”¨

#### **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹:**
- `rakuten_data` (JSONB) - å®Ÿéš›ã¯openBDã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ï¼ˆåå‰ã¯ãƒ¬ã‚¬ã‚·ãƒ¼ï¼‰
- `rakuten_url` (String) - æœªä½¿ç”¨ï¼ˆå°†æ¥å‰Šé™¤äºˆå®šï¼‰
- `rakuten_affiliate_url` (String) - æœªä½¿ç”¨ï¼ˆå°†æ¥å‰Šé™¤äºˆå®šï¼‰

---

### **4. å°†æ¥ã®è¨ˆç”»**

1. **Amazon PA-APIçµ±åˆå¾Œ:**
   - ä¾¡æ ¼ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼æƒ…å ±ã‚’è¿½åŠ 
   - openBDã¯åŸºæœ¬æƒ…å ±ã¨ã—ã¦ç¶™ç¶šä½¿ç”¨

2. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³:**
   - `rakuten_data` â†’ `book_data` ã«ãƒªãƒãƒ¼ãƒ 
   - `rakuten_url`, `rakuten_affiliate_url` ã‚’å‰Šé™¤

---

### **5. å‰Šé™¤ã•ã‚ŒãŸã‚‚ã®**

#### **ã‚µãƒ¼ãƒ“ã‚¹:**
- âŒ `RakutenBooksService` - å®Œå…¨ã«å‰Šé™¤

#### **è¨­å®š:**
- âŒ `RAKUTEN_APPLICATION_ID`
- âŒ `RAKUTEN_AFFILIATE_ID`

#### **æ©Ÿèƒ½:**
- âŒ æ¥½å¤©ãƒ–ãƒƒã‚¯ã‚¹ã‹ã‚‰ã®æ›¸ç±æƒ…å ±å–å¾—
- âŒ æ¥½å¤©ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆãƒªãƒ³ã‚¯ç”Ÿæˆ
- âŒ æ¥½å¤©ãƒ–ãƒƒã‚¯ã‚¹URLæŠ½å‡º

---

### **6. ã‚³ãƒ¼ãƒ‰ã®çŠ¶æ…‹**

âœ… **ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†**
- æ¥½å¤©ãƒ–ãƒƒã‚¯ã‚¹é–¢é€£ã®ã‚³ãƒ¼ãƒ‰ã¯å‰Šé™¤æ¸ˆã¿
- openBDã¸ã®å®Œå…¨ç§»è¡Œå®Œäº†
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¢ãƒ‡ãƒ«ã«ã¯ãƒ¬ã‚¬ã‚·ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæ®‹ã‚‹ãŒã€ã‚³ãƒ¡ãƒ³ãƒˆã§æ˜è¨˜æ¸ˆã¿

---

## ğŸš€ **æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**

1. ãƒ‡ãƒ¼ã‚¿åé›†ã‚’å®Ÿè¡Œ:
   ```bash
   cd backend
   python -m scripts.collect_books_from_qiita --tags Python JavaScript --max-articles 100
   ```

2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ç¢ºèª:
   - `http://localhost:3000` ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ç¢ºèª

3. å°†æ¥ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³:
   - `rakuten_data` â†’ `book_data` ã«ãƒªãƒãƒ¼ãƒ 
   - `rakuten_url`, `rakuten_affiliate_url` ã‚’å‰Šé™¤

