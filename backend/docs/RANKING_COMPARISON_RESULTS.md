# ランキング計算方式の比較結果

## 📊 実データでの比較（365日間）

### 1. シンプル方式（言及数のみ）

**1位:** ISBN: B00LHFOTF4 (32件)
- スコア: 32.00
- 総いいね: 63
- 平均いいね: 1.97

**7位:** リーダブルコード (24件)
- スコア: 24.00
- 総いいね: 954
- 平均いいね: 39.75

**17位:** ネットワークはなぜつながるのか (12件)
- スコア: 12.00
- 総いいね: 1,602
- 平均いいね: 133.50

**特徴:**
- ✅ シンプルで理解しやすい
- ❌ 質の高い記事で言及される書籍が正しく評価されない
- ❌ いいね数が全く考慮されない

---

### 2. 加重スコア方式（推奨）

**計算式:**
```
スコア = (メンション数 × 10) + (総いいね数 × 0.5) + (平均いいね数 × 3)
```

**1位:** Pythonで始める機械学習 (1件)
- スコア: 5,858.50
- 総いいね: 1,671
- 平均いいね: 1,671.00

**3位:** ISBN: B00UAAK07S (3件)
- スコア: 3,936.00
- 総いいね: 2,604
- 平均いいね: 868.00

**4位:** Linuxシステムプログラミング (1件)
- スコア: 3,674.50
- 総いいね: 1,047
- 平均いいね: 1,047.00

**特徴:**
- ✅ いいね数を重視
- ✅ 総いいね数と平均いいね数の両方を考慮
- ❌ 1件だけの超高評価記事が上位を独占
- ❌ スコアが大きすぎて直感的でない

---

### 3. 品質重視方式（✨ 最推奨）

**計算式:**
```
スコア = メンション数 × (1 + log(平均いいね数 + 1))
```

**1位:** リーダブルコード (24件)
- スコア: 112.98
- 総いいね: 954
- 平均いいね: 39.75

**2位:** ネットワークはなぜつながるのか (12件)
- スコア: 70.82
- 総いいね: 1,602
- 平均いいね: 133.50

**3位:** 世界一流エンジニアの思考法 (17件)
- スコア: 69.09
- 総いいね: 347
- 平均いいね: 20.41

**4位:** ISBN: B00LHFOTF4 (32件)
- スコア: 66.82
- 総いいね: 63
- 平均いいね: 1.97

**特徴:**
- ✅ バランスが取れている
- ✅ 言及数が多い書籍も適切に評価
- ✅ 質の高い記事で言及される書籍も適切に評価
- ✅ 対数スケールで極端な値を緩和
- ✅ スコアが適度な範囲で直感的
- ✅ スパム対策（1記事だけの高評価記事でも限定的な影響）

---

## 🎯 推奨

**品質重視方式**を採用することを推奨します。

### 理由:
1. **多くの記事で言及される書籍**（例: リーダブルコード）が上位に
2. **質の高い記事で言及される書籍**（例: ネットワークはなぜつながるのか）も適切に評価
3. **極端な値を緩和**（1記事だけの超高評価記事が独占しない）
4. **スパム対策**（人為的な操作が難しい）
5. **スコアが直感的**（100前後の値で分かりやすい）

### ランキングの変化例:

**シンプル → 品質重視:**
- リーダブルコード: 7位 → **1位** ⬆️ (質の高い記事で多く言及)
- ネットワークはなぜつながるのか: 17位 → **2位** ⬆️ (平均いいね133.5)
- 世界一流エンジニアの思考法: 12位 → **3位** ⬆️ (バランス良好)

---

## 💻 実装状況

- ✅ `RankingService.get_ranking()` に `scoring_method` パラメータを追加
- ✅ 3つのスコアリング方式を実装済み
  - `"simple"`: シンプル（言及数のみ）
  - `"weighted"`: 加重スコア
  - `"quality"`: 品質重視（推奨）
- ✅ statsに `avg_likes` と `score` を追加
- ⏳ フロントエンドでの表示対応（未実装）

---

## 📈 次のステップ

1. ユーザーの承認を得る
2. デフォルトのスコアリング方式を `"quality"` に設定
3. フロントエンドでスコアと平均いいね数を表示
4. 必要に応じてスコアリング方式の切り替え機能を追加（管理画面など）

